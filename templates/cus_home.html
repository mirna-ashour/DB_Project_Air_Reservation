{% extends "header.html" %}

{% for mess in get_flashed_messages()  %}
<div class="alert alert-warning alert-dismissible fade show" role="alert">
  <button type="button" class="close" data-dismiss="alert" aria-label="Close" class="fade close">
	<span aria-hidden="true">&times;</span>
  </button>
  {{mess}}
  </div>
{% endfor %}

{% block body %}
{% if firstname != 'None' %}
    <h1>Welcome, {{firstname['FirstName']}}</h1>
{% endif %}

<style type="text/css">
    table, th, td{
        border: 1px solid black;
    }
</style>
<br>
<h2>View Your Flights</h2>
<table class = "table">
    <th>Airline Name</th>
    <th>Flight Number</th>
    <th>Departure Time</th>
    <th>Departure Date</th>
{% for row in flights %}
    <tr>
        <td>{{row['Airline_name']}}</td>
        <td>{{row['Flight_num']}}</td>
        <td>{{row['Departure_time']}}</td>
        <td>{{row['Departure_date']}}</td>
    </tr>
{% endfor %}
</table>

<h2>Search For Flights by Airport Name or City</h2>
<form action="/cus_home" method="POST">
	  <div class="row">
		<div class="col">
			<input type="text" class="form-control" name = "source_airp" placeholder="From (Airport Name)"/> </br>
		</div>
		<div class="col">
			<input type="text" class="form-control" name = "source_city" placeholder="From (City)"/> </br>
		</div>
	  </div>
	  <div class="row">
		<div class="col">
			<input type="text" class="form-control" name = "destination_airp" placeholder="To (Airport Name)"/> </br>
		</div>
		<div class="col">
			<input type="text" class="form-control" name = "destination_city" placeholder="To (City)"/> </br>
		</div>
	  </div>
	<div class="form-check form-check-inline">
		<input class="form-check-input" type="radio" name="options" id="inlineRadio1" value="option1">
		<label class="form-check-label" for="inlineRadio1">One-Way</label>
	  </div>
	  <div class="form-check form-check-inline">
		<input class="form-check-input" type="radio" name="options" id="inlineRadio2" value="option2">
		<label class="form-check-label" for="inlineRadio2">Round Trip</label>
	  </div>
	<br><br>
	<div class="row">
		<div class="col-4">
			<b>Departure Date</b>
		</div>
		<div class="col-4">
			<b>Return Date</b>
		</div>
	</div>
	<div class="row">
		<div class="col-4">
			<input type="date" name = "depart" placeholder="Depart"/>
		</div>
		<div class="col-4">
   			<input type="date" name = "return" placeholder="Return"/>
		</div>
	</div>
    <br>
    <input type="submit" value = "Search" /> </br>
<br>
</form>

{% if going != 'None' %}
	{% if trip_type == 'option2' %}   <!-- Round Trip -->
    	<h3>Departing Flights</h3>
	{% else %}    <!-- One Way -->
    	<h3>Flights</h3>
	{% endif %}
    <table class = "table">
        <th>Airline Name</th>
        <th>Flight Number</th>
        <th>Departure Time</th>
        <th>Departure Date</th>
        <th>Arrival Time</th>
        <th>Arrival Date</th>
		<th>Departure City</th>
		<th>Arrival City</th>
        <th>Departure Airport</th>
        <th>Arrival Airport</th>
		<th>Purchase</th>
    {% for row in going %}
        <tr>
            <td>{{row['Airline_name']}}</td>
            <td>{{row['Flight_num']}}</td>
            <td>{{row['Departure_time']}}</td>
            <td>{{row['Departure_date']}}</td>
            <td>{{row['Arrival_time']}}</td>
            <td>{{row['Arrival_date']}}</td>
			<td>{{row['City']}}</td>
            <td>{{row['B.City']}}</td>
            <td>{{row['Name']}}</td>
            <td>{{row['B.Name']}}</td>
			<td>
				<a href="/purchase">Purchase</a>
			</td>
        </tr>
    {% endfor %}
    </table>
	{% if trip_type == 'option2' %}
		<h3>Returning Trips</h3>
		<table class = "table">
			<th>Airline Name</th>
			<th>Flight Number</th>
			<th>Departure Time</th>
			<th>Departure Date</th>
			<th>Arrival Time</th>
			<th>Arrival Date</th>
			<th>Departure City</th>
			<th>Arrival City</th>
			<th>Departure Airport</th>
			<th>Arrival Airport</th>
			<th>Purchase</th>
		{% for row in returning %}
			<tr>
				<td>{{row['Airline_name']}}</td>
				<td>{{row['Flight_num']}}</td>
				<td>{{row['Departure_time']}}</td>
				<td>{{row['Departure_date']}}</td>
				<td>{{row['Arrival_time']}}</td>
				<td>{{row['Arrival_date']}}</td>
				<td>{{row['City']}}</td>
				<td>{{row['B.City']}}</td>
				<td>{{row['Name']}}</td>
				<td>{{row['B.Name']}}</td>
				<td>
					<a href="/purchase">Purchase</a>
				</td>
			</tr>
		{% endfor %}
		</table>
	{% endif %}
{% endif %}

<h2>View Your Tickets</h2>
<table class = "table">
    <th>Airline Name</th>
    <th>Flight Number</th>
    <th>Departure Time</th>
    <th>Departure Date</th>
	<th>Purchase Date</th>
	<th>Purchase Time</th>
{% for row in tickets %}
    <tr>
        <td>{{row['Airline_name']}}</td>
        <td>{{row['Flight_num']}}</td>
        <td>{{row['Departure_time']}}</td>
        <td>{{row['Departure_date']}}</td>
		<td>{{row['Purchase_date']}}</td>
		<td>{{row['Purchase_time']}}</td>
    </tr>
{% endfor %}
</table>


<a href="/logout">Logout</a>
{% endblock %}